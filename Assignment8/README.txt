This code creates the abstracted version of the image. Just run the code, put your own image and optimize the values of mingrad and maxgrad
to obtain the desired value of the darken edge. 

Reference:

Winnemöller, Holger, Sven C. Olsen, and Bruce Gooch. "Real-time video abstraction." ACM Transactions On Graphics (TOG). Vol. 25. No. 3. ACM, 2006.